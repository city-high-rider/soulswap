[gd_scene load_steps=11 format=3 uid="uid://cuna3v5lattg1"]

[ext_resource type="PackedScene" uid="uid://bb3ty1kswqumk" path="res://player/player_body.tscn" id="1_0ans4"]
[ext_resource type="PackedScene" uid="uid://danr4y7gq7sch" path="res://ghosts/player_ghost.tscn" id="2_6lav1"]
[ext_resource type="PackedScene" uid="uid://cviymy0k6qspe" path="res://ghosts/roller_ghost.tscn" id="2_cw06x"]
[ext_resource type="PackedScene" uid="uid://djmr5rbqoq33n" path="res://roller_body.tscn" id="4_kohc7"]
[ext_resource type="PackedScene" uid="uid://cht1nvmsvv4nx" path="res://interactive/popup_area.tscn" id="5_rnba8"]

[sub_resource type="ProceduralSkyMaterial" id="ProceduralSkyMaterial_obdej"]
sky_horizon_color = Color(0.64625, 0.65575, 0.67075, 1)
ground_horizon_color = Color(0.64625, 0.65575, 0.67075, 1)

[sub_resource type="Sky" id="Sky_ruq33"]
sky_material = SubResource("ProceduralSkyMaterial_obdej")

[sub_resource type="Environment" id="Environment_m6vkg"]
background_mode = 2
sky = SubResource("Sky_ruq33")
tonemap_mode = 2
glow_enabled = true

[sub_resource type="NavigationMesh" id="NavigationMesh_toq2o"]
vertices = PackedVector3Array(-6.22928, 0.513723, 5.58039, -0.229281, 0.513723, 5.83039, 6.27072, 0.513723, 5.83039, 6.27072, 0.513723, -5.66961, 0.0207186, 0.513723, -5.66961, 0.0207186, 0.513723, -5.66961, -6.22928, 0.513723, -5.66961, -6.22928, 0.513723, 5.58039, 6.02072, -17.2363, -0.169613, 12.5207, -17.2363, -0.169613, 6.27072, -17.2363, -0.419613, -6.22928, -17.2363, -0.419613, -12.4793, -17.2363, -0.419613, -6.47928, -17.2363, -0.169613, 6.02072, -17.2363, -0.169613, 6.27072, -17.2363, -0.419613, 0.0207186, -17.2363, -0.419613, -0.229281, -17.2363, -0.169613, -6.22928, -17.2363, -0.419613, -6.47928, -17.2363, -0.169613, -0.229281, -17.2363, -0.169613, 0.0207186, -17.2363, -0.419613, 5.77072, -17.2363, 31.8304, 12.0207, -17.2363, 31.8304, 12.2707, -17.2363, 31.3304, 12.2707, -17.2363, 8.83039, 12.2707, -17.2363, 1.58039, 6.02072, -17.2363, 1.58039, -6.22928, -17.2363, 1.58039, -12.2293, -17.2363, 1.58039, -12.2293, -17.2363, 9.08039, 5.77072, -17.2363, 31.8304, 12.2707, -17.2363, 31.3304, 12.2707, -17.2363, 23.8304, -0.229281, -17.2363, 31.8304, 12.2707, -17.2363, 8.83039, 6.02072, -17.2363, 1.58039, 0.0207186, -17.2363, 1.58039, 12.2707, -17.2363, 16.3304, -12.2293, -17.2363, 24.0804, -12.2293, -17.2363, 31.8304, -0.229281, -17.2363, 31.8304, 0.0207186, -17.2363, 1.58039, -6.22928, -17.2363, 1.58039, -12.2293, -17.2363, 9.08039, -12.2293, -17.2363, 16.5804, -12.2293, -17.2363, 16.5804, -12.2293, -17.2363, 24.0804, -0.229281, -17.2363, 31.8304, 12.2707, -17.2363, 23.8304, 12.2707, -17.2363, 16.3304, 0.0207186, -17.2363, 1.58039, -6.22928, 0.513723, 17.8304, -2.72928, 0.513723, 17.8304, -2.47928, 0.513723, 15.5804, 2.52072, 0.513723, 15.5804, 2.77072, 0.513723, 17.8304, 6.27072, 0.513723, 17.8304, 2.52072, 0.513723, 15.5804, 6.27072, 0.513723, 17.8304, 6.27072, 0.513723, 7.33039, 0.0207186, 0.513723, 7.33039, -6.22928, 0.513723, 7.33039, -6.22928, 0.513723, 17.8304, -2.47928, 0.513723, 15.5804, 0.0207186, 0.513723, 7.33039, -2.47928, 0.513723, 15.5804, 2.52072, 0.513723, 15.5804, 0.0207186, 0.513723, 7.33039, -2.47928, 0.513723, 20.0804, -2.72928, 0.513723, 17.8304, -6.22928, 0.513723, 17.8304, -6.22928, 0.513723, 24.8304, 1.77072, 0.513723, 24.5804, 1.77072, 0.513723, 20.0804, -2.47928, 0.513723, 20.0804, -6.22928, 0.513723, 24.8304, 6.27072, 0.513723, 17.8304, 2.77072, 0.513723, 17.8304, 2.77072, 0.513723, 19.8304, 2.77072, 0.513723, 19.8304, 1.77072, 0.513723, 20.0804, 1.77072, 0.513723, 24.5804, 6.27072, 0.513723, 24.5804, 6.27072, 0.513723, 17.8304, 2.77072, 0.513723, 19.8304, 1.77072, 0.513723, 24.5804)
polygons = [PackedInt32Array(1, 0, 2), PackedInt32Array(2, 0, 4), PackedInt32Array(2, 4, 3), PackedInt32Array(7, 6, 5), PackedInt32Array(10, 9, 8), PackedInt32Array(13, 12, 11), PackedInt32Array(17, 16, 14), PackedInt32Array(14, 16, 15), PackedInt32Array(21, 20, 18), PackedInt32Array(18, 20, 19), PackedInt32Array(24, 23, 22), PackedInt32Array(27, 26, 25), PackedInt32Array(30, 29, 28), PackedInt32Array(32, 31, 33), PackedInt32Array(33, 31, 34), PackedInt32Array(36, 35, 37), PackedInt32Array(37, 35, 38), PackedInt32Array(41, 40, 39), PackedInt32Array(43, 42, 44), PackedInt32Array(44, 42, 45), PackedInt32Array(47, 46, 48), PackedInt32Array(48, 46, 49), PackedInt32Array(49, 46, 50), PackedInt32Array(50, 46, 51), PackedInt32Array(54, 53, 52), PackedInt32Array(57, 56, 55), PackedInt32Array(61, 60, 58), PackedInt32Array(58, 60, 59), PackedInt32Array(65, 64, 62), PackedInt32Array(62, 64, 63), PackedInt32Array(68, 67, 66), PackedInt32Array(70, 69, 71), PackedInt32Array(71, 69, 72), PackedInt32Array(74, 73, 75), PackedInt32Array(75, 73, 76), PackedInt32Array(79, 78, 77), PackedInt32Array(82, 81, 80), PackedInt32Array(86, 85, 83), PackedInt32Array(83, 85, 84)]

[sub_resource type="BoxShape3D" id="BoxShape3D_j1146"]
size = Vector3(4.16369, 0.933459, 6.26368)

[node name="test_level" type="Node3D"]

[node name="WorldEnvironment" type="WorldEnvironment" parent="."]
environment = SubResource("Environment_m6vkg")

[node name="OmniLight3D" type="OmniLight3D" parent="WorldEnvironment"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 2.04284, 0)
omni_range = 6.14423

[node name="NavigationRegion3D" type="NavigationRegion3D" parent="."]
navigation_mesh = SubResource("NavigationMesh_toq2o")

[node name="CSGCombiner3D" type="CSGCombiner3D" parent="NavigationRegion3D"]
use_collision = true

[node name="floor" type="CSGBox3D" parent="NavigationRegion3D/CSGCombiner3D"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 10)
size = Vector3(14.507, 0.349575, 32.8814)

[node name="floor2" type="CSGBox3D" parent="NavigationRegion3D/CSGCombiner3D"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -17.8115, 15.7307)
size = Vector3(25.7985, 0.349575, 32.8814)

[node name="wall" type="CSGBox3D" parent="NavigationRegion3D/CSGCombiner3D"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 2.17844, -6.44033)
size = Vector3(14.4915, 4.09761, 0.458561)

[node name="wall2" type="CSGBox3D" parent="NavigationRegion3D/CSGCombiner3D"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -4, 2.17844, 6.55967)
size = Vector3(6, 4.09761, 0.458561)

[node name="wall5" type="CSGBox3D" parent="NavigationRegion3D/CSGCombiner3D"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 4, 2.17844, 6.55967)
size = Vector3(6, 4.09761, 0.458561)

[node name="wall7" type="CSGBox3D" parent="NavigationRegion3D/CSGCombiner3D"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0.12913, 2.17844, 25.5597)
size = Vector3(14.1153, 4.09761, 0.458561)

[node name="wall6" type="CSGBox3D" parent="NavigationRegion3D/CSGCombiner3D"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 2.8746, 6.55967)
size = Vector3(2, 2.72386, 0.458561)

[node name="wall3" type="CSGBox3D" parent="NavigationRegion3D/CSGCombiner3D"]
transform = Transform3D(-4.37114e-08, 0, -1, 0, 1, 0, 1, 0, -4.37114e-08, -7, 2.17844, 9.7473)
size = Vector3(32.6723, 4.09761, 0.458561)

[node name="wall4" type="CSGBox3D" parent="NavigationRegion3D/CSGCombiner3D"]
transform = Transform3D(-4.37114e-08, 0, -1, 0, 1, 0, 1, 0, -4.37114e-08, 7, 2.17844, 9.64427)
size = Vector3(31.965, 4.09761, 0.458561)

[node name="wall8" type="CSGBox3D" parent="NavigationRegion3D/CSGCombiner3D"]
transform = Transform3D(-4.37114e-08, 0, -1, 0, 1, 0, 1, 0, -4.37114e-08, 13, -15.8216, 16.6443)
size = Vector3(31.965, 4.09761, 0.458561)

[node name="wall9" type="CSGBox3D" parent="NavigationRegion3D/CSGCombiner3D"]
transform = Transform3D(-4.37114e-08, 0, -1, 0, 1, 0, 1, 0, -4.37114e-08, -13, -15.8216, 16.6443)
size = Vector3(31.965, 4.09761, 0.458561)

[node name="wall10" type="CSGBox3D" parent="NavigationRegion3D/CSGCombiner3D"]
transform = Transform3D(-1, 0, 8.74228e-08, 0, 1, 0, -8.74228e-08, 0, -1, 0, -15.8216, 32.6443)
size = Vector3(26.3269, 4.09761, 0.458561)

[node name="wall11" type="CSGBox3D" parent="NavigationRegion3D/CSGCombiner3D"]
transform = Transform3D(-1, 0, 8.74228e-08, 0, 1, 0, -8.74228e-08, 0, -1, 0, -15.8216, 0.644264)
size = Vector3(26.3269, 4.09761, 0.458561)

[node name="Corridor" type="CSGBox3D" parent="NavigationRegion3D/CSGCombiner3D"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -6.64702, 17.9029)
size = Vector3(5.23167, 13.5383, 4.1043)

[node name="CorridorSub" type="CSGBox3D" parent="NavigationRegion3D/CSGCombiner3D"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -6.30299, 17.9029)
operation = 2
size = Vector3(4.65079, 15.7742, 3.74762)

[node name="Husk" parent="." node_paths=PackedStringArray("ghost") instance=ExtResource("1_0ans4")]
transform = Transform3D(0.66769, 0, 0.74444, 0, 1, 0, -0.74444, 0, 0.66769, 4.11029, 1.29377, 3.08619)
ghost = NodePath("PlayerGhost")

[node name="PlayerGhost" parent="Husk" instance=ExtResource("2_6lav1")]

[node name="Roller" parent="." node_paths=PackedStringArray("ghost") instance=ExtResource("4_kohc7")]
transform = Transform3D(-4.37114e-08, 0, -1, 0, 1, 0, 1, 0, -4.37114e-08, -4.38906, 1.17479, 2.44237)
ghost = NodePath("RollerGhost")

[node name="RollerGhost" parent="Roller" instance=ExtResource("2_cw06x")]

[node name="Pursue" parent="Roller/RollerGhost/StateMachine" index="0" node_paths=PackedStringArray("target")]
target = NodePath("../../../../Husk")

[node name="PopupArea" parent="." instance=ExtResource("5_rnba8")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.730784, 2.29698)
message = "Press F to possess an enemy that you're looking at."

[node name="CollisionShape3D" type="CollisionShape3D" parent="PopupArea"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0.219558, -0.030674, -0.134823)
shape = SubResource("BoxShape3D_j1146")

[editable path="Roller/RollerGhost"]
[editable path="PopupArea"]
